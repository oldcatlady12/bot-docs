<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFL Fantasy AI Bot - Documentation</title>
    <style>
        :root {
            --bg-primary: #0f1419;
            --bg-secondary: #1a1f2e;
            --bg-card: #1e2433;
            --text-primary: #e7e9ea;
            --text-secondary: #8b98a5;
            --accent-blue: #1d9bf0;
            --accent-green: #00ba7c;
            --accent-purple: #7856ff;
            --accent-orange: #ff7a00;
            --accent-red: #f4212e;
            --border-color: #2f3542;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
        header { background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); padding: 20px 0; position: sticky; top: 0; z-index: 100; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .back-link { color: var(--accent-blue); text-decoration: none; display: flex; align-items: center; gap: 8px; }
        .bot-icon { width: 48px; height: 48px; background: linear-gradient(135deg, #013369, #9b59b6); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        main { padding: 40px 0; }
        .content-section { margin-bottom: 48px; }
        .content-section h2 { font-size: 1.75rem; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid var(--border-color); }
        .content-section h3 { font-size: 1.25rem; margin: 24px 0 12px; color: var(--accent-blue); }
        .content-section p { color: var(--text-secondary); margin-bottom: 16px; }
        .card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px; margin-bottom: 16px; }
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .feature-item { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; }
        .feature-icon { font-size: 24px; margin-bottom: 8px; }
        .feature-item h4 { margin-bottom: 4px; }
        .feature-item p { color: var(--text-secondary); font-size: 0.9rem; margin: 0; }
        .command-table { width: 100%; border-collapse: collapse; margin-bottom: 24px; }
        .command-table th, .command-table td { text-align: left; padding: 12px 16px; border-bottom: 1px solid var(--border-color); }
        .command-table th { background: var(--bg-secondary); color: var(--text-secondary); font-weight: 600; font-size: 0.85rem; text-transform: uppercase; }
        .command-name { font-family: 'Consolas', monospace; background: var(--bg-secondary); padding: 4px 8px; border-radius: 4px; color: var(--accent-blue); }
        .code-block { background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; font-family: 'Consolas', monospace; font-size: 0.9rem; overflow-x: auto; margin-bottom: 16px; white-space: pre-wrap; }
        .tag { display: inline-block; padding: 4px 10px; border-radius: 20px; font-size: 0.8rem; margin-right: 6px; }
        .tag.user { background: rgba(0, 186, 124, 0.2); color: var(--accent-green); }
        .tag.admin { background: rgba(255, 122, 0, 0.2); color: #ff7a00; }
        ul { margin-left: 24px; margin-bottom: 16px; color: var(--text-secondary); }
        li { margin-bottom: 8px; }
        .flow-diagram { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 24px; margin: 24px 0; }
        .flow-step { display: flex; align-items: center; margin-bottom: 16px; }
        .flow-step:last-child { margin-bottom: 0; }
        .flow-number { width: 32px; height: 32px; background: var(--accent-purple); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 16px; flex-shrink: 0; }
        .flow-arrow { color: var(--text-secondary); margin: 0 16px 16px 8px; font-size: 20px; }
        .league-badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: bold; margin-right: 8px; }
        .league-nfl { background: #013369; color: white; }
        .ai-badge { background: rgba(155, 89, 182, 0.2); color: #9b59b6; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 16px; margin: 24px 0; }
        .stat-box { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; text-align: center; }
        .stat-value { font-size: 2rem; font-weight: bold; color: var(--accent-blue); }
        .stat-label { font-size: 0.85rem; color: var(--text-secondary); }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="back-link"><span>&larr;</span> Back to All Bots</a>
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div class="bot-icon">&#128200;</div>
                    <h1>NFL Fantasy AI Bot</h1>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <!-- Overview Section -->
            <section class="content-section">
                <h2>Overview</h2>
                <p>The NFL Fantasy AI Bot is an AI-powered Discord bot dedicated to NFL fantasy football analysis. It uses dual AI providers (OpenAI GPT-4o and Anthropic Claude) with a consensus engine to deliver comprehensive analysis, weekly reports, fantasy cheat sheets, and Google Docs exports. The bot is NFL-only and adapts its behavior based on the current NFL season phase.</p>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value">2</div>
                        <div class="stat-label">AI Providers</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">53</div>
                        <div class="stat-label">Commands</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">32</div>
                        <div class="stat-label">NFL Teams</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">3</div>
                        <div class="stat-label">Scoring Formats</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">8</div>
                        <div class="stat-label">Season Phases</div>
                    </div>
                </div>

                <div class="feature-grid">
                    <div class="feature-item">
                        <div class="feature-icon">&#129302;</div>
                        <h4>Dual AI Analysis</h4>
                        <p>GPT-4o and Claude analyze independently, then a consensus engine merges results with Borda count ranking and confidence scores</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128200;</div>
                        <h4>Fantasy Cheat Sheets</h4>
                        <p>Tiered player rankings, Top 200 lists, and draft strategies for Standard, PPR, and Half-PPR scoring</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128197;</div>
                        <h4>Automated Weekly Reports</h4>
                        <p>Scheduled AI-generated reports for all 32 NFL teams posted to dedicated forum threads</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128196;</div>
                        <h4>Google Docs Export</h4>
                        <p>Export comprehensive analysis to shareable Google Docs with formatted sections and weekly appendix</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128202;</div>
                        <h4>Player Statistics</h4>
                        <p>Fantasy points, passing, rushing, receiving leaders with consistency and boom/bust analysis</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#127942;</div>
                        <h4>Rookie & Draft Analysis</h4>
                        <p>NFL draft pick profiles, college comparisons, dynasty rankings, and draft strategy guides</p>
                    </div>
                </div>
            </section>

            <!-- AI Architecture Section -->
            <section class="content-section">
                <h2>AI Architecture</h2>
                <p>The bot queries both AI providers with the same prompt and NFL data context, then merges their responses using a consensus engine. Disagreements between providers are flagged for user review.</p>

                <div class="flow-diagram">
                    <div class="flow-step">
                        <div class="flow-number">1</div>
                        <div>User triggers AI analysis command (e.g., <code>/sos</code>, <code>/cheat-sheet</code>)</div>
                    </div>
                    <div class="flow-arrow">&#8595;</div>
                    <div class="flow-step">
                        <div class="flow-number">2</div>
                        <div>Rate limiter checks per-provider limits (RPM, token budget, max 3 concurrent per provider)</div>
                    </div>
                    <div class="flow-arrow">&#8595;</div>
                    <div class="flow-step">
                        <div class="flow-number">3</div>
                        <div>Prompt template filled with NFL data and sent to <strong>both</strong> OpenAI and Anthropic concurrently</div>
                    </div>
                    <div class="flow-arrow">&#8595;</div>
                    <div class="flow-step">
                        <div class="flow-number">4</div>
                        <div>Consensus engine merges: averages numeric ratings, Borda count for rankings, combines narrative analysis</div>
                    </div>
                    <div class="flow-arrow">&#8595;</div>
                    <div class="flow-step">
                        <div class="flow-number">5</div>
                        <div>Disagreements flagged (>5 rank difference), confidence score calculated based on agreement level</div>
                    </div>
                    <div class="flow-arrow">&#8595;</div>
                    <div class="flow-step">
                        <div class="flow-number">6</div>
                        <div>Results stored in database, formatted as Discord embeds with color-coded tiers, and sent to user</div>
                    </div>
                </div>

                <h3>AI Providers</h3>
                <div class="feature-grid">
                    <div class="feature-item">
                        <h4>OpenAI (GPT-4o)</h4>
                        <p>Primary analysis provider with native JSON mode. Strong quantitative analysis and structured output.</p>
                    </div>
                    <div class="feature-item">
                        <h4>Anthropic (Claude)</h4>
                        <p>Secondary analysis with nuanced narrative reasoning. JSON extracted from code blocks automatically.</p>
                    </div>
                    <div class="feature-item">
                        <h4>Consensus Engine</h4>
                        <p>Borda count ranking merge, averaged numeric ratings, combined narratives, flagged disagreements with confidence scores.</p>
                    </div>
                </div>

                <h3>Rate Limiting</h3>
                <div class="card">
                    <p>Token bucket algorithm with per-provider limits:</p>
                    <ul>
                        <li><strong>Requests per minute:</strong> 10 per provider (configurable)</li>
                        <li><strong>Tokens per minute:</strong> 100,000 per provider</li>
                        <li><strong>Max concurrent:</strong> 3 simultaneous requests per provider</li>
                        <li><strong>Retry:</strong> Automatic exponential backoff on rate limit errors</li>
                    </ul>
                </div>
            </section>

            <!-- NFL Season Phases Section -->
            <section class="content-section">
                <h2>NFL Season Phases</h2>
                <p>The bot detects the current NFL calendar phase and adapts its automated behavior accordingly:</p>
                <table class="command-table">
                    <thead>
                        <tr><th>Phase</th><th>Period</th><th>Bot Behavior</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Offseason</td><td>Feb - Mar</td><td>Weekly Monday noon ET updates on free agency and trades</td></tr>
                        <tr><td>Pre-Draft</td><td>Mar - Apr</td><td>Draft prospect analysis, mock drafts, and trade rumors</td></tr>
                        <tr><td>Post-Draft</td><td>Apr - May</td><td>Rookie impact analysis, landing spot grades, depth chart projections</td></tr>
                        <tr><td>OTA</td><td>May - Jun</td><td>Voluntary workouts, scheme installation, depth chart updates</td></tr>
                        <tr><td>Training Camp</td><td>Jul - Aug</td><td>Camp battles, injury reports, roster cut analysis</td></tr>
                        <tr><td>Preseason</td><td>Aug - Sep</td><td>Preseason performance analysis, final roster projections</td></tr>
                        <tr><td>Regular Season</td><td>Sep - Jan</td><td>Friday 10 PM ET comprehensive weekly reports for all 32 teams</td></tr>
                        <tr><td>Playoffs</td><td>Jan - Feb</td><td>Playoff team analysis, championship matchup breakdowns</td></tr>
                    </tbody>
                </table>
            </section>

            <!-- Forum Channel Structure Section -->
            <section class="content-section">
                <h2>Forum Channel Structure</h2>
                <p>The bot creates organized Discord forum channels for NFL analysis. Each channel has pre-configured tags for easy filtering:</p>
                <div class="feature-grid">
                    <div class="feature-item">
                        <div class="feature-icon">&#128202;</div>
                        <h4>nfl-statistics</h4>
                        <p>Fantasy points, passing, rushing, receiving stats. Tags: Fantasy Points, Passing, Rushing, Receiving, Season Stats</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#127891;</div>
                        <h4>nfl-rookies</h4>
                        <p>Position-based rookie profiles with auto-close after 7 days. Tags: QB, RB, WR, TE, Rookie Watch</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#127968;</div>
                        <h4>nfl-teams</h4>
                        <p>32 team threads with weekly AI-generated reports. Tags: AFC, NFC, Coaching, Offseason Moves</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128221;</div>
                        <h4>nfl-draft</h4>
                        <p>Draft guides, prospect analysis, mock drafts. Tags: Mock Draft, Prospects, Analysis</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#129302;</div>
                        <h4>nfl-ai-reports</h4>
                        <p>AI-generated weekly reports, cheat sheets, and rankings. Tags: Weekly Report, AI Analysis, Cheat Sheet, Rankings</p>
                    </div>
                </div>
            </section>

            <!-- Commands Section -->
            <section class="content-section">
                <h2>Commands</h2>

                <h3>AI Analysis Commands <span class="tag user">All Users</span> <span class="tag admin">+1 Admin</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">/sos [view]</span></td><td>AI strength of schedule rankings for all 32 teams. Optional view: "full" (default) or "remaining" schedule only.</td></tr>
                        <tr><td><span class="command-name">/player-value &lt;player&gt; [scoring]</span></td><td>AI analysis of whether a player is overvalued, undervalued, or fair value at their ADP. Supports Standard/PPR/Half-PPR scoring.</td></tr>
                        <tr><td><span class="command-name">/injury-risks</span></td><td>AI-assessed injury risk rankings for top fantasy players, including injury history, risk level (1-10), and handcuff recommendations.</td></tr>
                        <tr><td><span class="command-name">/breakout-candidates</span></td><td>AI-identified top 15 breakout candidates across all positions with confidence scores and reasoning.</td></tr>
                        <tr><td><span class="command-name">/coaching-rankings</span></td><td>AI-ranked coaching staffs (HC/OC/DC) by fantasy friendliness, including scheme type and pass/run tendency.</td></tr>
                        <tr><td><span class="command-name">/position-rankings &lt;position&gt; [scoring]</span></td><td>AI positional rankings for QB, RB, WR, TE, K, or DEF with tiers, floor/ceiling, and schedule grade.</td></tr>
                        <tr><td><span class="command-name">/offensive-line</span></td><td>AI offensive line rankings for all 32 teams with pass protection/run blocking grades and fantasy impact on QB/RB/WR.</td></tr>
                        <tr><td><span class="command-name">/adp-value [scoring]</span></td><td>AI comparison of ADP vs expected fantasy return, identifying the biggest value discrepancies.</td></tr>
                        <tr><td><span class="command-name">/ai-status</span></td><td>View AI provider health status, configured models, and rate limiter state for both OpenAI and Anthropic.</td></tr>
                        <tr><td><span class="command-name">/team-deep-dive &lt;team&gt;</span></td><td><strong>Admin only.</strong> Comprehensive AI deep dive covering offense, QB/RB/WR/TE analysis, O-line, schedule, fantasy values, sleepers, and busts.</td></tr>
                    </tbody>
                </table>

                <h3>Cheat Sheet Commands <span class="tag user">All Users</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">/cheat-sheet [scoring] [league_size]</span></td><td>Generate AI tiered cheat sheet with 6 tiers, value picks, overvalued players, sleepers, and draft strategy. League size defaults to 12.</td></tr>
                        <tr><td><span class="command-name">/top-200 [scoring]</span></td><td>AI-generated Top 200 overall player rankings with position rank, tier (1-8), bye week, and projection note.</td></tr>
                        <tr><td><span class="command-name">/tiers &lt;position&gt; [scoring]</span></td><td>View AI-generated player tiers for a specific position (QB/RB/WR/TE/K/DEF) with color-coded tier groupings.</td></tr>
                        <tr><td><span class="command-name">/draft-strategy [position] [scoring]</span></td><td>AI draft strategy advice, either overall or position-specific. Includes round-by-round recommendations.</td></tr>
                    </tbody>
                </table>

                <h3>Statistics Commands <span class="tag user">All Users</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">/stats [stat_type] [limit]</span></td><td>View NFL player statistics rankings. Stat types include: fantasy_points, passing_yards, passing_tds, rushing_yards, rushing_tds, receiving_yards, receptions, receiving_tds, targets, interceptions. Default: fantasy_points, top 20.</td></tr>
                        <tr><td><span class="command-name">/fantasy [scoring] [position]</span></td><td>View fantasy point rankings with Standard/PPR/Half-PPR scoring. Optionally filter by position (QB, RB, WR, TE, K, DEF).</td></tr>
                        <tr><td><span class="command-name">/consistency [position]</span></td><td>View consistency rankings with boom/bust analysis, weekly variance, and reliability scores.</td></tr>
                        <tr><td><span class="command-name">/player &lt;name&gt;</span></td><td>View detailed stats for a specific NFL player including season totals and consistency score.</td></tr>
                        <tr><td><span class="command-name">/status</span></td><td>View current NFL season phase, days until season start/draft, and bot operational status.</td></tr>
                    </tbody>
                </table>

                <h3>Draft Analysis Commands <span class="tag user">All Users</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">/draft_guide</span></td><td>NFL fantasy draft preparation guide with key strategies, position priority order, and links to AI-powered analysis commands.</td></tr>
                        <tr><td><span class="command-name">/team_review &lt;team&gt;</span></td><td>Detailed team analysis for fantasy including coaching staff, fantasy outlook, and offseason moves. Team abbreviation (e.g., KC, PHI, SF).</td></tr>
                        <tr><td><span class="command-name">/coaching_analysis &lt;team&gt;</span></td><td>Coaching staff analysis including head coach tendencies, coordinator schemes, and fantasy implications.</td></tr>
                        <tr><td><span class="command-name">/sleepers</span></td><td>Potential fantasy sleepers identified by opportunity changes, usage rate increases, and scheme fit improvements.</td></tr>
                        <tr><td><span class="command-name">/busts</span></td><td>Potential fantasy busts to avoid based on decreased opportunity, age regression, injury concerns, and coaching changes.</td></tr>
                    </tbody>
                </table>

                <h3>Rookie Commands <span class="tag user">All Users</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">/rookies [position]</span></td><td>NFL rookie class overview showing top draft picks grouped by round. Optionally filter by position (QB, RB, WR, TE).</td></tr>
                        <tr><td><span class="command-name">/rookie &lt;name&gt;</span></td><td>Detailed rookie profile with draft info, college performance, coaching comparison, and fantasy outlook.</td></tr>
                        <tr><td><span class="command-name">/dynasty_rookies</span></td><td>Rookies ranked for dynasty leagues by long-term fantasy value, tiered into Elite, High Upside, and Solid Contributors.</td></tr>
                        <tr><td><span class="command-name">/college_compare &lt;name&gt;</span></td><td>Compare rookie's college performance to pro projections including conference level, historical translations, and similar player comparisons.</td></tr>
                    </tbody>
                </table>

                <h3>Team Commands <span class="tag user">All Users</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">/teams</span></td><td>View all 32 NFL teams organized by conference (AFC/NFC) and division (East/North/South/West).</td></tr>
                        <tr><td><span class="command-name">/roster &lt;team&gt;</span></td><td>View a team's current roster grouped by position (QB, RB, WR, TE, OL, DL, LB, DB, K, P).</td></tr>
                        <tr><td><span class="command-name">/offseason_moves &lt;team&gt;</span></td><td>View offseason transactions including additions, departures, and their fantasy impact analysis.</td></tr>
                        <tr><td><span class="command-name">/depth_chart &lt;team&gt;</span></td><td>View projected depth chart for key fantasy positions: QB, RB, WR1, WR2, WR3, TE.</td></tr>
                        <tr><td><span class="command-name">/coaching_changes</span></td><td>View recent coaching hires and fires across the NFL and their fantasy implications.</td></tr>
                    </tbody>
                </table>

                <h3>Schedule Commands <span class="tag user">All Users</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">/schedule</span></td><td>View the bot's automatic update schedule including weekly stats updates and rookie post auto-close timing.</td></tr>
                        <tr><td><span class="command-name">/next_update</span></td><td>View when the next automatic statistics update will occur, including current NFL phase information.</td></tr>
                    </tbody>
                </table>

                <h3>Weekly Reports Commands <span class="tag user">User</span> <span class="tag admin">+3 Admin</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">/setup-team-forum &lt;forum_channel&gt;</span></td><td><strong>Admin only.</strong> Set the Discord forum channel where 32 NFL team report posts will be created.</td></tr>
                        <tr><td><span class="command-name">/create-team-posts</span></td><td><strong>Admin only.</strong> Create forum posts for all 32 NFL teams with season hub embeds. Checks for existing posts before creating.</td></tr>
                        <tr><td><span class="command-name">/trigger-weekly-update</span></td><td><strong>Admin only.</strong> Manually trigger AI-generated weekly reports for all 32 teams. Reports are posted to each team's forum thread.</td></tr>
                        <tr><td><span class="command-name">/report-status</span></td><td>View status of automated weekly reports including schedule, last report time, and team forum configuration.</td></tr>
                    </tbody>
                </table>

                <h3>Google Docs Commands <span class="tag user">User</span> <span class="tag admin">+2 Admin</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">/create-comprehensive-doc</span></td><td><strong>Admin only.</strong> Create a Google Doc with cheat sheets, Top 200, 32 team deep dives, SoS, player values, breakout candidates, and coaching rankings.</td></tr>
                        <tr><td><span class="command-name">/append-weekly-reports</span></td><td><strong>Admin only.</strong> Append latest 32-team weekly reports to existing comprehensive Google Doc.</td></tr>
                        <tr><td><span class="command-name">/doc-status</span></td><td>View links to created Google Docs and their creation/update timestamps.</td></tr>
                        <tr><td><span class="command-name">/setup-google</span></td><td>Step-by-step setup guide for Google Cloud Console service account configuration.</td></tr>
                    </tbody>
                </table>

                <h3>Setup & Admin Commands <span class="tag admin">Admin Only</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">/setup</span></td><td>Interactive setup wizard: configure fantasy roles, create forum channels, and initialize bot for your server.</td></tr>
                        <tr><td><span class="command-name">/settings</span></td><td>View current bot configuration including league, AI status, fantasy roles, and forum category.</td></tr>
                        <tr><td><span class="command-name">/reset</span></td><td>Reset all bot configuration for this server. Forum channels are preserved but need re-linking.</td></tr>
                        <tr><td><span class="command-name">/refresh</span></td><td>Manually refresh NFL statistics data from ESPN. Only runs during offseason periods.</td></tr>
                        <tr><td><span class="command-name">/force_update</span></td><td>Force an immediate NFL statistics update regardless of schedule.</td></tr>
                        <tr><td><span class="command-name">/post_stats</span></td><td>Post top 10 stat category rankings to configured stats forum channel with consistency analysis.</td></tr>
                        <tr><td><span class="command-name">/post_rookies</span></td><td>Post rookie profiles grouped by position to forum. Posts auto-close after 7 days.</td></tr>
                        <tr><td><span class="command-name">/post_team_reviews</span></td><td>Post comprehensive team reviews for all 32 NFL teams to teams forum channel.</td></tr>
                        <tr><td><span class="command-name">/post_draft_analysis</span></td><td>Post draft guide and NFL trends analysis to draft forum channel.</td></tr>
                        <tr><td><span class="command-name">/cleanup [days]</span></td><td>Archive forum posts older than specified days (default: 30).</td></tr>
                    </tbody>
                </table>
            </section>

            <!-- Fantasy Scoring Section -->
            <section class="content-section">
                <h2>Fantasy Scoring Systems</h2>
                <p>The bot supports three NFL fantasy scoring systems used across all AI analysis, cheat sheets, and rankings:</p>

                <div class="card">
                    <strong>Standard Scoring:</strong>
                    <ul>
                        <li>Passing: 0.04 pts/yard (1 pt per 25 yards), 4 pts/TD, -2 pts/INT</li>
                        <li>Rushing: 0.1 pts/yard, 6 pts/TD</li>
                        <li>Receiving: 0.1 pts/yard, 6 pts/TD, 0 pts/reception</li>
                        <li>Fumbles: -2 pts</li>
                    </ul>
                    <strong>PPR (Points Per Reception):</strong> Same as Standard + 1 pt per reception<br>
                    <strong>Half PPR:</strong> Same as Standard + 0.5 pts per reception
                </div>
            </section>

            <!-- Google Docs Section -->
            <section class="content-section">
                <h2>Google Docs Integration</h2>
                <p>The bot exports comprehensive analysis to Google Docs using a service account. Documents are made publicly viewable via link for easy sharing.</p>
                <div class="card">
                    <strong>Comprehensive Document Structure:</strong>
                    <ul>
                        <li><strong>Title Page:</strong> Season year and generation date</li>
                        <li><strong>Table of Contents:</strong> Linked section headers</li>
                        <li><strong>Fantasy Cheat Sheet:</strong> Tiered rankings for Standard/PPR/Half-PPR</li>
                        <li><strong>Top 200 Rankings:</strong> Overall player rankings by scoring format</li>
                        <li><strong>32 Team Deep Dives:</strong> Alphabetical team analysis with coaching, roster, and fantasy outlook</li>
                        <li><strong>Strength of Schedule:</strong> SoS rankings with fantasy impact per team</li>
                        <li><strong>Player Value Analysis:</strong> Overvalued and undervalued players at ADP</li>
                        <li><strong>Breakout Candidates:</strong> AI-identified breakout picks with confidence</li>
                        <li><strong>Coaching &amp; Scheme Rankings:</strong> Fantasy-friendly coaching staffs</li>
                        <li><strong>Weekly Reports Appendix:</strong> Appended each week with <code>/append-weekly-reports</code></li>
                    </ul>
                </div>

                <h3>Google Setup Requirements</h3>
                <div class="card">
                    <ul>
                        <li>Google Cloud project with Docs and Drive APIs enabled</li>
                        <li>Service account with JSON key file</li>
                        <li>Key file placed at path specified in <code>GOOGLE_CREDENTIALS_PATH</code></li>
                        <li>Run <code>/setup-google</code> for step-by-step instructions</li>
                    </ul>
                </div>
            </section>

            <!-- Setup Flow Section -->
            <section class="content-section">
                <h2>Setup Flow</h2>
                <div class="flow-diagram">
                    <div class="flow-step">
                        <div class="flow-number">1</div>
                        <div>Configure <code>.env</code> file with Discord token, AI API keys, and optional Google credentials</div>
                    </div>
                    <div class="flow-arrow">&#8595;</div>
                    <div class="flow-step">
                        <div class="flow-number">2</div>
                        <div>Admin runs <code>/setup</code> to start the interactive setup wizard</div>
                    </div>
                    <div class="flow-arrow">&#8595;</div>
                    <div class="flow-step">
                        <div class="flow-number">3</div>
                        <div>Configure roles: create "NFL Fantasy" role, link existing roles, or skip</div>
                    </div>
                    <div class="flow-arrow">&#8595;</div>
                    <div class="flow-step">
                        <div class="flow-number">4</div>
                        <div>Create forum channels (stats, rookies, teams, drafts) or link existing ones</div>
                    </div>
                    <div class="flow-arrow">&#8595;</div>
                    <div class="flow-step">
                        <div class="flow-number">5</div>
                        <div>Run <code>/refresh</code> to populate initial NFL statistics from ESPN</div>
                    </div>
                    <div class="flow-arrow">&#8595;</div>
                    <div class="flow-step">
                        <div class="flow-number">6</div>
                        <div>Run <code>/setup-team-forum</code> and <code>/create-team-posts</code> for 32 team weekly report threads</div>
                    </div>
                    <div class="flow-arrow">&#8595;</div>
                    <div class="flow-step">
                        <div class="flow-number">7</div>
                        <div>Optional: Run <code>/setup-google</code> to configure Google Docs export</div>
                    </div>
                </div>
            </section>

            <!-- Quick Start Guide -->
            <section class="content-section">
                <h2>Quick Start Guide</h2>
                <div class="code-block"># 1. Initial Setup (admin)
/setup

# 2. Populate NFL statistics
/refresh

# 3. Post content to forums (admin)
/post_stats
/post_rookies
/post_team_reviews
/post_draft_analysis

# 4. Set up 32 team forum threads for weekly AI reports (admin)
/setup-team-forum #nfl-teams
/create-team-posts

# 5. Generate AI analysis (all users)
/sos                          # Strength of schedule
/cheat-sheet ppr              # Fantasy cheat sheet (PPR)
/top-200 standard             # Top 200 rankings (Standard)
/player-value "Patrick Mahomes" ppr
/breakout-candidates
/coaching-rankings
/position-rankings QB ppr

# 6. Trigger weekly reports manually (admin)
/trigger-weekly-update

# 7. Export to Google Docs (admin)
/setup-google                 # One-time Google setup
/create-comprehensive-doc     # Full analysis document
/append-weekly-reports        # Add weekly updates

# 8. Monitor status
/ai-status                    # AI provider health
/status                       # NFL season phase
/report-status                # Weekly report status
/schedule                     # Update schedule
/next_update                  # Next scheduled update</div>
            </section>

            <!-- Automatic Updates -->
            <section class="content-section">
                <h2>Automatic Updates</h2>
                <p>The bot runs several automated tasks based on the NFL calendar:</p>
                <ul>
                    <li><strong>Offseason (Feb-Sep):</strong> Weekly Monday updates at noon ET with latest news, trades, and transactions for all teams</li>
                    <li><strong>Regular Season (Sep-Feb):</strong> Friday 10 PM ET comprehensive AI-generated weekly reports for all 32 teams</li>
                    <li><strong>Season Phase Detection:</strong> Bot automatically detects the current NFL phase (8 phases) and adapts behavior</li>
                    <li><strong>Post Auto-Close:</strong> Rookie forum posts automatically archive after 7 days</li>
                    <li><strong>Forum Cleanup:</strong> Admins can archive old posts with <code>/cleanup [days]</code></li>
                    <li><strong>Google Docs Append:</strong> Weekly reports can be appended to the comprehensive doc with <code>/append-weekly-reports</code></li>
                </ul>
            </section>

            <!-- Data Sources -->
            <section class="content-section">
                <h2>Data Sources</h2>
                <ul>
                    <li><strong>ESPN Public API:</strong> NFL player stats, team rosters, draft info, schedules, and injury reports</li>
                    <li><strong>Pro Football Reference:</strong> Historical statistics, coaching staff data, and career records (via BeautifulSoup scraping)</li>
                    <li><strong>OpenAI GPT-4o:</strong> AI-powered analysis, rankings generation, and structured JSON output</li>
                    <li><strong>Anthropic Claude:</strong> AI-powered narrative analysis, contextual reasoning, and consensus validation</li>
                </ul>
            </section>

            <!-- Command Summary -->
            <section class="content-section">
                <h2>Command Summary</h2>
                <table class="command-table">
                    <thead><tr><th>Category</th><th>Count</th><th>Permission</th></tr></thead>
                    <tbody>
                        <tr><td>AI Analysis Commands</td><td>10</td><td>9 User + 1 Admin (/team-deep-dive)</td></tr>
                        <tr><td>Cheat Sheet Commands</td><td>4</td><td>All Users</td></tr>
                        <tr><td>Statistics Commands</td><td>5</td><td>All Users</td></tr>
                        <tr><td>Draft Analysis Commands</td><td>5</td><td>All Users</td></tr>
                        <tr><td>Rookie Commands</td><td>4</td><td>All Users</td></tr>
                        <tr><td>Team Commands</td><td>5</td><td>All Users</td></tr>
                        <tr><td>Schedule Commands</td><td>2</td><td>All Users</td></tr>
                        <tr><td>Weekly Reports Commands</td><td>4</td><td>1 User + 3 Admin</td></tr>
                        <tr><td>Google Docs Commands</td><td>4</td><td>2 User + 2 Admin</td></tr>
                        <tr><td>Setup &amp; Admin Commands</td><td>10</td><td>Admin Only</td></tr>
                        <tr><td><strong>Total</strong></td><td><strong>53</strong></td><td><strong>31 User / 22 Admin</strong></td></tr>
                    </tbody>
                </table>
                <p style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 8px;">
                    <em>Note: Additionally, the bot runs 3 automated background tasks (weekly statistics update, forum post auto-close, and season status check) and 1 automated report loop (30-minute interval for weekly team reports).</em>
                </p>
            </section>

            <!-- Technical Stack -->
            <section class="content-section">
                <h2>Technical Stack</h2>
                <div class="card">
                    <ul>
                        <li><strong>Language:</strong> Python 3.11+</li>
                        <li><strong>Discord Library:</strong> discord.py 2.3+ (slash commands via app_commands)</li>
                        <li><strong>Database:</strong> SQLite with async SQLAlchemy ORM (aiosqlite)</li>
                        <li><strong>AI - OpenAI:</strong> openai &gt;= 1.0.0 (AsyncOpenAI client, GPT-4o model)</li>
                        <li><strong>AI - Anthropic:</strong> anthropic &gt;= 0.18.0 (AsyncAnthropic client, Claude model)</li>
                        <li><strong>Google Docs:</strong> google-api-python-client with service account authentication</li>
                        <li><strong>Visualization:</strong> Matplotlib + Seaborn for chart generation</li>
                        <li><strong>Data Fetching:</strong> aiohttp (async HTTP), BeautifulSoup4 (HTML scraping)</li>
                        <li><strong>Rate Limiting:</strong> Custom token bucket with per-provider concurrency semaphores</li>
                        <li><strong>Scheduling:</strong> discord.ext.tasks loops + APScheduler for cron-style triggers</li>
                    </ul>
                </div>
            </section>

            <!-- Database Schema -->
            <section class="content-section">
                <h2>Database Schema</h2>
                <p>The bot uses SQLite with SQLAlchemy async ORM. Key tables include:</p>
                <div class="feature-grid">
                    <div class="feature-item">
                        <h4>Core Tables</h4>
                        <p>ServerConfig, Team, Player, PlayerStat, ForumChannel, ForumPost, RookieProfile</p>
                    </div>
                    <div class="feature-item">
                        <h4>AI Tables</h4>
                        <p>AIAnalysisResult, AIConsensusResult (stores provider responses and merged results)</p>
                    </div>
                    <div class="feature-item">
                        <h4>Report Tables</h4>
                        <p>WeeklyReport, NFLTeamForum (32 team thread tracking)</p>
                    </div>
                    <div class="feature-item">
                        <h4>Analysis Tables</h4>
                        <p>StrengthOfSchedule, PlayerValue (overvalued/undervalued/fair with injury risk 1-10)</p>
                    </div>
                    <div class="feature-item">
                        <h4>Export Tables</h4>
                        <p>GoogleDocExport (tracks doc IDs, URLs, and update timestamps)</p>
                    </div>
                </div>
            </section>

            <!-- Environment Variables -->
            <section class="content-section">
                <h2>Environment Variables</h2>
                <div class="code-block"># Discord Bot (required)
DISCORD_TOKEN=your_discord_bot_token
DISCORD_GUILD_ID=your_guild_id

# Database (required)
DATABASE_URL=sqlite+aiosqlite:///database/fantasy_sports.db

# AI Providers (required for AI commands)
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-4o
ANTHROPIC_API_KEY=your_anthropic_api_key
ANTHROPIC_MODEL=claude-sonnet-4-20250514

# Google Docs (optional - for /create-comprehensive-doc)
GOOGLE_CREDENTIALS_PATH=google/credentials/service_account.json
GOOGLE_DOCS_FOLDER_ID=optional_google_drive_folder_id

# Debug (optional)
DEBUG_MODE=false</div>
            </section>
        </div>
    </main>
</body>
</html>
