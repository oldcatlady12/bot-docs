<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Bot - Documentation</title>
    <style>
        :root {
            --bg-primary: #0f1419;
            --bg-secondary: #1a1f2e;
            --bg-card: #1e2433;
            --text-primary: #e7e9ea;
            --text-secondary: #8b98a5;
            --accent-blue: #1d9bf0;
            --accent-green: #00ba7c;
            --accent-purple: #7856ff;
            --border-color: #2f3542;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
        header { background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); padding: 20px 0; position: sticky; top: 0; z-index: 100; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .back-link { color: var(--accent-blue); text-decoration: none; display: flex; align-items: center; gap: 8px; }
        .bot-icon { width: 48px; height: 48px; background: linear-gradient(135deg, #7856ff, #ff7a00); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        main { padding: 40px 0; }
        .content-section { margin-bottom: 48px; }
        .content-section h2 { font-size: 1.75rem; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid var(--border-color); }
        .content-section h3 { font-size: 1.25rem; margin: 24px 0 12px; color: var(--accent-blue); }
        .content-section p { color: var(--text-secondary); margin-bottom: 16px; }
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .feature-item { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; }
        .feature-icon { font-size: 24px; margin-bottom: 8px; }
        .feature-item h4 { margin-bottom: 4px; }
        .feature-item p { color: var(--text-secondary); font-size: 0.9rem; margin: 0; }
        .command-table { width: 100%; border-collapse: collapse; margin-bottom: 24px; }
        .command-table th, .command-table td { text-align: left; padding: 12px 16px; border-bottom: 1px solid var(--border-color); }
        .command-table th { background: var(--bg-secondary); color: var(--text-secondary); font-weight: 600; font-size: 0.85rem; text-transform: uppercase; }
        .command-name { font-family: 'Consolas', monospace; background: var(--bg-secondary); padding: 4px 8px; border-radius: 4px; color: var(--accent-blue); }
        .code-block { background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; font-family: 'Consolas', monospace; font-size: 0.9rem; overflow-x: auto; margin-bottom: 16px; }
        .tag { display: inline-block; padding: 4px 10px; border-radius: 20px; font-size: 0.8rem; margin-right: 6px; }
        .tag.user { background: rgba(0, 186, 124, 0.2); color: var(--accent-green); }
        .tag.admin { background: rgba(255, 122, 0, 0.2); color: #ff7a00; }
        ul { margin-left: 24px; margin-bottom: 16px; color: var(--text-secondary); }
        li { margin-bottom: 8px; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="back-link"><span>&larr;</span> Back to All Bots</a>
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div class="bot-icon">&#128197;</div>
                    <h1>Schedule Bot</h1>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <section class="content-section">
                <h2>Overview</h2>
                <p>The Schedule Bot provides smart sports schedules and league standings. It automatically posts game schedules with intelligent timing - weekly for football (Tuesdays), daily for other sports when games exist. Updates scores hourly and provides interactive standings buttons. Works alongside the Sports Bot for comprehensive sports coverage.</p>

                <div class="feature-grid">
                    <div class="feature-item">
                        <div class="feature-icon">&#127944;</div>
                        <h4>Weekly Football</h4>
                        <p>NFL &amp; CFB posted Tuesdays with Thu/Sat/Sun games</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128197;</div>
                        <h4>Smart Daily Posts</h4>
                        <p>Other sports post when games exist</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#127942;</div>
                        <h4>Interactive Standings</h4>
                        <p>Click buttons to view conference/division standings</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128260;</div>
                        <h4>Hourly Score Updates</h4>
                        <p>Live scores updated every hour (edits existing message)</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#127774;</div>
                        <h4>Off-Season Support</h4>
                        <p>Season countdown &amp; last season standings</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128279;</div>
                        <h4>Thread Links</h4>
                        <p>Links to game threads from Sports Bot</p>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2>How It Works</h2>
                <p>The Schedule Bot runs on a separate token from the Sports Bot and uses intelligent scheduling logic:</p>

                <h3>Football Sports (NFL, CFB)</h3>
                <ul>
                    <li><strong>Weekly Posts on Tuesdays:</strong> Posts one schedule message every Tuesday at 9:00 AM ET</li>
                    <li><strong>Week Overview:</strong> Shows games for Thursday, Saturday, and Sunday</li>
                    <li><strong>Score Updates:</strong> Edits the same message hourly with live scores and final results</li>
                    <li><strong>Game Links:</strong> Links to Sports Bot game threads for each game</li>
                </ul>

                <h3>Other Sports (NBA, MLB, WNBA, NCAAM, NCAAW)</h3>
                <ul>
                    <li><strong>Smart Daily Posts:</strong> Only posts when there are games that day or week</li>
                    <li><strong>Message Editing:</strong> If no games today but games exist this week, edits the previous message instead of posting new</li>
                    <li><strong>Hourly Updates:</strong> Edits existing message with current scores (no duplicate messages)</li>
                </ul>

                <h3>General Features</h3>
                <ul>
                    <li><strong>Interactive Standings:</strong> Each schedule message has a button to view that sport's standings</li>
                    <li><strong>Conference/Division Selection:</strong> Click standings button to see buttons for each conference (AFC, NFC, etc.)</li>
                    <li><strong>Off-Season Detection:</strong> Shows countdown to season start and last season's standings when off-season</li>
                    <li><strong>Cross-Bot Integration:</strong> Links to Sports Bot game threads</li>
                    <li><strong>Separate Live Games Message:</strong> When games are live, shows a second message with detailed scores, time remaining, and quarter info</li>
                </ul>
            </section>

            <section class="content-section">
                <h2>Setup</h2>
                <h3>Installation</h3>
                <div class="code-block">
# Navigate to bot directory
cd schedule-bot

# Create virtual environment
python -m venv venv

# Activate venv (Windows)
.\venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Configure .env file
# SCHEDULE_BOT_TOKEN=your_separate_token_here

# Run the bot
python schedule_bot.py
                </div>

                <h3>Important Note</h3>
                <p>This bot requires a <strong>separate Discord bot token</strong> from the Sports Bot. Create a second application in the Discord Developer Portal.</p>
            </section>

            <section class="content-section">
                <h2>Commands</h2>
                <h3>Setup Commands</h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th><th>Access</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">!set_schedule_forum &lt;forum_id&gt;</span></td><td>Set the forum channel for schedule posts</td><td><span class="tag admin">Admin</span></td></tr>
                        <tr><td><span class="command-name">!setup_schedules &lt;sports&gt;</span></td><td>Enable sports (e.g., nfl nba mlb)</td><td><span class="tag admin">Admin</span></td></tr>
                        <tr><td><span class="command-name">!set_game_forum &lt;sport&gt; &lt;id&gt;</span></td><td>Link sport to game thread forum</td><td><span class="tag admin">Admin</span></td></tr>
                        <tr><td><span class="command-name">!setup_guide</span></td><td>Create user guide channel</td><td><span class="tag admin">Admin</span></td></tr>
                        <tr><td><span class="command-name">!set_admin_guide &lt;channel_id&gt;</span></td><td>Post admin guide to channel</td><td><span class="tag admin">Admin</span></td></tr>
                    </tbody>
                </table>

                <h3>Utility Commands</h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th><th>Access</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">!post_schedules</span></td><td>Manually post all schedules now</td><td><span class="tag admin">Admin</span></td></tr>
                        <tr><td><span class="command-name">!schedule_status</span></td><td>View current bot configuration</td><td><span class="tag user">Everyone</span></td></tr>
                        <tr><td><span class="command-name">!test_games &lt;sport&gt;</span></td><td>Test API response for a sport</td><td><span class="tag admin">Admin</span></td></tr>
                        <tr><td><span class="command-name">!cleanup_duplicates</span></td><td>Remove duplicate schedule threads</td><td><span class="tag admin">Admin</span></td></tr>
                    </tbody>
                </table>
            </section>

            <section class="content-section">
                <h2>Integration with Sports Bot</h2>
                <p>The Schedule Bot reads from a shared file to link to game threads:</p>
                <div class="code-block">
# Shared file location (relative to schedule-bot)
../sports-bot/shared_game_threads.json

# Contains mapping of game_id -> thread info
{
  "game_threads": {
    "401547234": {
      "thread_id": "123456789",
      "guild_id": "987654321",
      "home_team": "LAL",
      "away_team": "BOS"
    }
  }
}
                </div>
            </section>

            <section class="content-section">
                <h2>Configuration Files</h2>
                <table class="command-table">
                    <thead><tr><th>File</th><th>Purpose</th></tr></thead>
                    <tbody>
                        <tr><td><code>.env</code></td><td>SCHEDULE_BOT_TOKEN</td></tr>
                        <tr><td><code>schedule_bot_settings.json</code></td><td>Guild settings, enabled sports, forum channels</td></tr>
                    </tbody>
                </table>
            </section>

            <section class="content-section">
                <h2>Standings Feature</h2>
                <p>Every schedule message includes an interactive standings button:</p>

                <h3>How to View Standings</h3>
                <ul>
                    <li>Click the "View [Sport] Standings" button on any schedule message</li>
                    <li>Standings are shown as an ephemeral message (only visible to you)</li>
                    <li>For leagues with conferences (NFL, NBA, MLB), you'll see additional buttons for each conference</li>
                    <li>Click a conference button (e.g., "AFC", "NFC") to see just that conference's standings</li>
                </ul>

                <h3>Standings Display</h3>
                <ul>
                    <li><strong>Sorted by Win Percentage:</strong> Teams are ranked by win percentage (descending), with overall record as tiebreaker</li>
                    <li><strong>Playoff Indicators:</strong> Teams that have clinched playoff spots show special indicators:
                        <ul>
                            <li><code>x-</code> - Clinched playoff berth</li>
                            <li><code>y-</code> - Clinched division</li>
                            <li><code>z-</code> - Clinched #1 seed / conference</li>
                            <li><code>*-</code> - Clinched wild card</li>
                            <li><code>e-</code> - Eliminated from playoff contention</li>
                        </ul>
                    </li>
                    <li><strong>Win Percentage Display:</strong> Shows W-L record alongside win percentage (e.g., "12-4 (.750)")</li>
                </ul>

                <h3>Off-Season Standings</h3>
                <ul>
                    <li>During off-season, standings show "(Last Season)" in the title</li>
                    <li>Displays the previous season's final standings</li>
                    <li>Schedule messages show countdown to next season (e.g., "Season begins in 45 days")</li>
                </ul>

                <h3>Supported Conferences/Divisions</h3>
                <table class="command-table">
                    <thead><tr><th>Sport</th><th>Conferences</th></tr></thead>
                    <tbody>
                        <tr><td>NFL</td><td>AFC, NFC (16 teams each)</td></tr>
                        <tr><td>NBA</td><td>Eastern, Western (15 teams each)</td></tr>
                        <tr><td>MLB</td><td>American League, National League (15 teams each)</td></tr>
                        <tr><td>CFB</td><td>Conference standings available</td></tr>
                        <tr><td>NCAAM/NCAAW</td><td>Conference standings available</td></tr>
                    </tbody>
                </table>
            </section>

            <section class="content-section">
                <h2>Automatic Features</h2>

                <h3>Football Weekly Posting (NFL, CFB)</h3>
                <ul>
                    <li>Posts <strong>one message per week on Tuesdays</strong> at 9:00 AM ET</li>
                    <li>Shows all games for Thursday, Saturday, and Sunday</li>
                    <li>Organized by day with clear day headers</li>
                    <li>Updates the same message throughout the week as games complete</li>
                    <li>Shows checkmarks for completed days, "Today" indicator for current day</li>
                </ul>

                <h3>Smart Daily Posting (Other Sports)</h3>
                <ul>
                    <li>Posts at <strong>9:00 AM Eastern Time</strong> only when games exist</li>
                    <li>If no games today but games exist this week: <strong>edits previous day's message</strong></li>
                    <li>If no games this week: <strong>skips posting entirely</strong></li>
                    <li>Shows team matchups with game times in Eastern timezone</li>
                </ul>

                <h3>Hourly Score Updates</h3>
                <ul>
                    <li>Every hour, <strong>edits the existing schedule message</strong> with current scores (no duplicate messages)</li>
                    <li>Shows final scores for completed games</li>
                    <li>Updates in-progress game scores with quarter/period info</li>
                    <li>Posts a separate <strong>Live Games Message</strong> when games are in progress</li>
                    <li>Live Games Message shows: scores, time remaining, quarter, and game thread links</li>
                    <li>Rate-limited (2 second delay between sports) to avoid API issues</li>
                </ul>

                <h3>Off-Season Detection</h3>
                <p>The bot automatically detects when a sport is in off-season and displays:</p>
                <ul>
                    <li>A message indicating the season has ended</li>
                    <li>Countdown to the next season start date (days, weeks, or months)</li>
                    <li>Previous season standings when clicking the standings button</li>
                    <li>Off-season posts daily with standings button</li>
                </ul>
            </section>

            <section class="content-section">
                <h2>Supported Sports</h2>
                <p>Same sports as the Sports Bot:</p>
                <ul>
                    <li>NFL, NBA, CFB, WNBA, MLB, NCAAM, NCAAW</li>
                </ul>
                <p>Each sport can have its own forum channel and alert role configured.</p>

                <h3>Season Schedule</h3>
                <table class="command-table">
                    <thead><tr><th>Sport</th><th>Season Start</th><th>Season End</th></tr></thead>
                    <tbody>
                        <tr><td>NFL</td><td>September</td><td>February (Super Bowl)</td></tr>
                        <tr><td>NBA</td><td>October</td><td>June (Finals)</td></tr>
                        <tr><td>MLB</td><td>Late March</td><td>October (World Series)</td></tr>
                        <tr><td>CFB</td><td>Late August</td><td>January (Championship)</td></tr>
                        <tr><td>WNBA</td><td>May</td><td>September</td></tr>
                        <tr><td>NCAAM</td><td>November</td><td>April (March Madness)</td></tr>
                        <tr><td>NCAAW</td><td>November</td><td>April</td></tr>
                    </tbody>
                </table>
            </section>
        </div>
    </main>
</body>
</html>
