<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Recommendation Bot - Documentation</title>
    <style>
        :root {
            --bg-primary: #0f1419;
            --bg-secondary: #1a1f2e;
            --bg-card: #1e2433;
            --text-primary: #e7e9ea;
            --text-secondary: #8b98a5;
            --accent-blue: #1d9bf0;
            --accent-green: #00ba7c;
            --accent-purple: #7856ff;
            --accent-pink: #e91e8c;
            --border-color: #2f3542;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
        header { background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); padding: 20px 0; position: sticky; top: 0; z-index: 100; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .back-link { color: var(--accent-blue); text-decoration: none; display: flex; align-items: center; gap: 8px; }
        .bot-icon { width: 48px; height: 48px; background: linear-gradient(135deg, #e91e8c, #7856ff); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        main { padding: 40px 0; }
        .content-section { margin-bottom: 48px; }
        .content-section h2 { font-size: 1.75rem; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px solid var(--border-color); }
        .content-section h3 { font-size: 1.25rem; margin: 24px 0 12px; color: var(--accent-purple); }
        .content-section p { color: var(--text-secondary); margin-bottom: 16px; }
        .card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px; margin-bottom: 16px; }
        .card h4 { margin-bottom: 8px; }
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .feature-item { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; }
        .feature-icon { font-size: 24px; margin-bottom: 8px; }
        .feature-item h4 { margin-bottom: 4px; }
        .feature-item p { color: var(--text-secondary); font-size: 0.9rem; margin: 0; }
        .command-table { width: 100%; border-collapse: collapse; margin-bottom: 24px; }
        .command-table th, .command-table td { text-align: left; padding: 12px 16px; border-bottom: 1px solid var(--border-color); }
        .command-table th { background: var(--bg-secondary); color: var(--text-secondary); font-weight: 600; font-size: 0.85rem; text-transform: uppercase; }
        .command-name { font-family: 'Consolas', monospace; background: var(--bg-secondary); padding: 4px 8px; border-radius: 4px; color: var(--accent-purple); }
        .code-block { background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; font-family: 'Consolas', monospace; font-size: 0.9rem; overflow-x: auto; margin-bottom: 16px; }
        .tag { display: inline-block; padding: 4px 10px; border-radius: 20px; font-size: 0.8rem; margin-right: 6px; }
        .tag.user { background: rgba(0, 186, 124, 0.2); color: var(--accent-green); }
        .tag.admin { background: rgba(255, 122, 0, 0.2); color: #ff7a00; }
        .tag.new { background: rgba(233, 30, 140, 0.2); color: var(--accent-pink); }
        ul { margin-left: 24px; margin-bottom: 16px; color: var(--text-secondary); }
        li { margin-bottom: 8px; }
        .category-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-bottom: 24px; }
        .category-item { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; padding: 12px; text-align: center; }
        .category-item .emoji { font-size: 28px; display: block; margin-bottom: 4px; }
        .category-item .name { font-weight: 600; }
        .category-item.new { border-color: var(--accent-pink); }
        .category-item .new-badge { font-size: 0.7rem; background: var(--accent-pink); color: white; padding: 2px 6px; border-radius: 4px; margin-top: 4px; display: inline-block; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="back-link"><span>&larr;</span> Back to All Bots</a>
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div class="bot-icon">&#127916;</div>
                    <h1>Media Recommendation Bot</h1>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <section class="content-section">
                <h2>Overview</h2>
                <p>The Media Recommendation Bot is a comprehensive recommendation tracking system for Discord servers. Members can recommend and vote on various types of media including games, movies, TV shows, anime, manga, and more. Features automatic forum organization, voting systems, leaderboards, approval system, and optional Google Calendar integration for unreleased media.</p>

                <div class="feature-grid">
                    <div class="feature-item">
                        <div class="feature-icon">&#127918;</div>
                        <h4>15 Media Categories</h4>
                        <p>From video games to anime movies, with new split categories for better organization</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128077;</div>
                        <h4>Like System</h4>
                        <p>Like recommendations with persistent tracking and real-time leaderboard updates</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128483;</div>
                        <h4>Forum Organization</h4>
                        <p>Auto-creates forums and genre threads for each category</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128197;</div>
                        <h4>Calendar Integration</h4>
                        <p>Add unreleased media to Google Calendar</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#9989;</div>
                        <h4>Approval System</h4>
                        <p>Optional admin approval before recommendations are posted</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">&#128269;</div>
                        <h4>Media Info Lookup</h4>
                        <p>Auto-fetch details from OMDB, TMDB, Jikan, AniList, Kitsu, and RAWG APIs</p>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2>Media Categories</h2>
                <p>The bot supports 15 different media categories, each with its own dedicated forum channel. New categories provide better organization for anime, cartoons, and documentaries:</p>
                <div class="category-grid">
                    <div class="category-item">
                        <span class="emoji">&#127918;</span>
                        <span class="name">Video Games</span>
                    </div>
                    <div class="category-item">
                        <span class="emoji">&#127922;</span>
                        <span class="name">Board Games</span>
                    </div>
                    <div class="category-item">
                        <span class="emoji">&#127183;</span>
                        <span class="name">Card Games</span>
                    </div>
                    <div class="category-item">
                        <span class="emoji">&#127916;</span>
                        <span class="name">Movies</span>
                    </div>
                    <div class="category-item">
                        <span class="emoji">&#128250;</span>
                        <span class="name">TV Shows</span>
                    </div>
                    <div class="category-item new">
                        <span class="emoji">&#127800;</span>
                        <span class="name">Anime Movies</span>
                        <span class="new-badge">NEW</span>
                    </div>
                    <div class="category-item new">
                        <span class="emoji">&#128250;</span>
                        <span class="name">Anime TV Shows</span>
                        <span class="new-badge">NEW</span>
                    </div>
                    <div class="category-item new">
                        <span class="emoji">&#127912;</span>
                        <span class="name">Cartoon Movies</span>
                        <span class="new-badge">NEW</span>
                    </div>
                    <div class="category-item new">
                        <span class="emoji">&#128250;</span>
                        <span class="name">Cartoon TV Shows</span>
                        <span class="new-badge">NEW</span>
                    </div>
                    <div class="category-item new">
                        <span class="emoji">&#127909;</span>
                        <span class="name">Documentary Films</span>
                        <span class="new-badge">NEW</span>
                    </div>
                    <div class="category-item new">
                        <span class="emoji">&#128249;</span>
                        <span class="name">Docuseries</span>
                        <span class="new-badge">NEW</span>
                    </div>
                    <div class="category-item">
                        <span class="emoji">&#128214;</span>
                        <span class="name">Manga</span>
                    </div>
                    <div class="category-item">
                        <span class="emoji">&#128165;</span>
                        <span class="name">Comics</span>
                    </div>
                    <div class="category-item">
                        <span class="emoji">&#128225;</span>
                        <span class="name">Streams</span>
                    </div>
                    <div class="category-item">
                        <span class="emoji">&#127760;</span>
                        <span class="name">Websites</span>
                    </div>
                </div>
            </section>

            <section class="content-section">
                <h2>Commands</h2>

                <h3>Setup Commands <span class="tag admin">Admin Only</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">!setup_media</span></td><td>Create all media category forums and genre threads (initial setup)</td></tr>
                        <tr><td><span class="command-name">!setup_recommend_channel [#channel]</span></td><td>Set up the recommendation submission channel. Uses current channel if none specified.</td></tr>
                        <tr><td><span class="command-name">!setup_missing</span></td><td>Check and create any missing categories, forums, leaderboards, daily posts, and genre posts. Use this to fix incomplete setups or add missing components.</td></tr>
                    </tbody>
                </table>

                <h3>Approval System Commands <span class="tag admin">Admin Only</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">!set_approval_channel [#channel]</span></td><td>Set up the approval channel for recommendation reviews. All recommendations will be sent here for admin approval.</td></tr>
                        <tr><td><span class="command-name">!enable_approval</span></td><td>Enable the approval system for recommendations</td></tr>
                        <tr><td><span class="command-name">!disable_approval</span></td><td>Disable the approval system - recommendations will be posted directly</td></tr>
                        <tr><td><span class="command-name">!approval_status</span></td><td>Check the current approval system status</td></tr>
                    </tbody>
                </table>

                <h3>Deletion Notification Commands <span class="tag admin">Admin Only</span> <span class="tag new">NEW</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">!set_deletion_channel [#channel]</span></td><td>Set up the channel for deletion notifications. When forum channels, posts, or threads are manually deleted, the bot will send a notification here allowing admins to confirm database cleanup.</td></tr>
                        <tr><td><span class="command-name">!disable_deletion_notifications</span></td><td>Disable deletion notifications - deleted items will be auto-removed from database</td></tr>
                    </tbody>
                </table>

                <h3>Category Management Commands <span class="tag admin">Admin Only</span> <span class="tag new">NEW</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">!reorganize [mode]</span></td><td>Check and reorganize misplaced recommendations. Modes: <code>report</code> (default) - shows which need to be moved; <code>execute</code> - actually moves recommendations to correct categories</td></tr>
                        <tr><td><span class="command-name">!migrate_categories</span></td><td>Migrate old category names to new ones in the database (anime -> anime_tv, cartoons -> cartoon_tv). Run before reorganize.</td></tr>
                    </tbody>
                </table>

                <h3>User Commands <span class="tag user">Everyone</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">!leaderboard [category]</span></td><td>View top recommendations. Optional category filter (e.g., movies, anime_movies, video_games).</td></tr>
                        <tr><td><span class="command-name">!random_rec [category]</span></td><td>Get a random recommendation from the database</td></tr>
                        <tr><td><span class="command-name">!media_stats</span></td><td>View server statistics (total recommendations by category)</td></tr>
                    </tbody>
                </table>

                <h3>Calendar Commands (Optional) <span class="tag admin">Admin Only</span></h3>
                <table class="command-table">
                    <thead><tr><th>Command</th><th>Description</th></tr></thead>
                    <tbody>
                        <tr><td><span class="command-name">!setup_calendar</span></td><td>View Google Calendar setup instructions</td></tr>
                        <tr><td><span class="command-name">!authenticate_calendar</span></td><td>Authenticate with Google Calendar API</td></tr>
                        <tr><td><span class="command-name">!set_calendar &lt;id&gt;</span></td><td>Set which calendar to use for release dates</td></tr>
                        <tr><td><span class="command-name">!list_calendars</span></td><td>View all available Google Calendars</td></tr>
                    </tbody>
                </table>
            </section>

            <section class="content-section">
                <h2>New Features</h2>

                <h3>Split Category Detection</h3>
                <p>The bot now automatically detects and categorizes media more accurately:</p>
                <ul>
                    <li><strong>Anime Movies vs Anime TV</strong> - Anime films (e.g., Studio Ghibli movies) go to anime_movies, while series go to anime_tv</li>
                    <li><strong>Cartoon Movies vs Cartoon TV</strong> - Western animated films (e.g., Pixar, Disney) go to cartoon_movies, while series go to cartoon_tv</li>
                    <li><strong>Documentary Films vs Docuseries</strong> - Documentary movies go to documentary_films, documentary series go to docuseries</li>
                </ul>

                <h3>Deletion Notifications</h3>
                <p>When forum posts or threads are manually deleted by admins:</p>
                <ul>
                    <li>If a notification channel is set, the bot sends an alert with "Delete from Database" and "Keep in Database" buttons</li>
                    <li>Admins can choose to remove the entry from the database or keep it for potential re-submission</li>
                    <li>Bulk deletion notifications when an entire forum channel is deleted</li>
                </ul>

                <h3>Reorganize Command</h3>
                <p>Use <code>!reorganize report</code> to analyze all recommendations and find any that should be moved to different categories. Then use <code>!reorganize execute</code> to automatically move them.</p>
            </section>

            <section class="content-section">
                <h2>Setup & Configuration</h2>
                <h3>Installation</h3>
                <div class="code-block">
# Navigate to bot directory
cd media-recommendation-bot

# Create virtual environment
python -m venv venv

# Activate venv (Windows)
.\venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Configure .env file
# DISCORD_TOKEN=your_token_here
# OMDB_API_KEY=your_omdb_key (optional)
# RAWG_API_KEY=your_rawg_key (optional)

# Run the bot
python bot.py
                </div>

                <h3>Bot Permissions</h3>
                <p>The bot requires these permissions:</p>
                <ul>
                    <li>Manage Channels - Create forum channels for categories</li>
                    <li>Send Messages - Post recommendations and leaderboards</li>
                    <li>Create Public Threads - Create genre threads in forums</li>
                    <li>Send Messages in Threads - Post in forum threads</li>
                    <li>Manage Messages - Update leaderboard messages</li>
                    <li>Read Message History - Track existing recommendations</li>
                    <li>Add Reactions - Vote button functionality</li>
                </ul>
            </section>

            <section class="content-section">
                <h2>Auto-Fetched Media Info</h2>
                <p>The bot automatically fetches information from multiple APIs:</p>
                <table class="command-table">
                    <thead><tr><th>Media Type</th><th>API Source</th><th>Info Fetched</th></tr></thead>
                    <tbody>
                        <tr><td>Movies & TV Shows</td><td>OMDB, TMDB</td><td>Year, Rating, Plot, Poster, Genre</td></tr>
                        <tr><td>Anime & Manga</td><td>Jikan, AniList, Kitsu</td><td>Synopsis, Score, Episodes, Type (Movie/TV), Image</td></tr>
                        <tr><td>Video Games</td><td>RAWG</td><td>Release Date, Rating, Description, Image</td></tr>
                        <tr><td>Documentaries</td><td>TMDB</td><td>Year, Synopsis, Type (Film/Series), Image</td></tr>
                        <tr><td>Cartoons</td><td>TMDB</td><td>Year, Synopsis, Type (Movie/TV), Image</td></tr>
                    </tbody>
                </table>
            </section>

            <section class="content-section">
                <h2>Command Summary</h2>
                <div class="card">
                    <h4>Total Commands: 14</h4>
                    <p><strong>Admin Commands:</strong> 11 (setup_media, setup_recommend_channel, setup_missing, set_approval_channel, enable_approval, disable_approval, approval_status, set_deletion_channel, disable_deletion_notifications, reorganize, migrate_categories)</p>
                    <p><strong>User Commands:</strong> 3 (leaderboard, random_rec, media_stats)</p>
                    <p><strong>Calendar Commands:</strong> 4 (setup_calendar, authenticate_calendar, set_calendar, list_calendars)</p>
                </div>
            </section>
        </div>
    </main>
</body>
</html>
